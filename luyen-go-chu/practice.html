<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trình Luyện Gõ Phím</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <style>
        body { font-family: 'Be Vietnam Pro', sans-serif; background-color: #f0f2f5; }
        .finger.active { fill: #10b981; /* Màu xanh lá */ transition: fill 0.1s ease-in-out; }
        .key.active { background-color: #10b981; color: white; transform: scale(0.95); box-shadow: 0 2px 10px rgba(16, 185, 129, 0.5); }
        .key { transition: all 0.07s ease-in-out; text-transform: uppercase; }
        #text-to-type { user-select: none; }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen">

    <div id="loading-state" class="fixed top-0 left-0 w-full h-full bg-white z-50 flex-col items-center justify-center" style="display: none;">
        <div class="w-16 h-16 border-4 border-t-4 border-t-blue-500 border-gray-200 rounded-full animate-spin"></div>
        <p id="loading-message" class="mt-4 text-lg text-gray-600">Đang tải dữ liệu...</p>
    </div>

    <main id="app-container" class="max-w-6xl w-full mx-auto p-4 sm:p-6 bg-white rounded-2xl shadow-lg">
        <header class="flex flex-col sm:flex-row items-center justify-between mb-4">
            <h1 id="lesson-title" class="text-2xl font-bold text-gray-800">Trình Luyện Gõ Phím</h1>
            <a href="index.html" class="text-blue-600 hover:text-blue-800 transition-colors">
                <i class="fas fa-list-ul mr-2"></i>Chọn bài học khác
            </a>
        </header>

        <div id="lesson-selector-container" class="flex flex-wrap gap-2 mb-4 border-b pb-4"></div>

        <div class="grid grid-cols-3 gap-4 mb-4 text-center">
            <div class="p-4 bg-gray-100 rounded-lg"><p class="text-sm text-gray-500">Tốc độ (WPM)</p><p id="wpm" class="text-3xl font-bold text-gray-800">0</p></div>
            <div class="p-4 bg-gray-100 rounded-lg"><p class="text-sm text-gray-500">Chính xác</p><p id="accuracy" class="text-3xl font-bold text-gray-800">100%</p></div>
            <div class="p-4 bg-gray-100 rounded-lg"><p class="text-sm text-gray-500">Thời gian</p><p id="timer" class="text-3xl font-bold text-gray-800">0:00</p></div>
        </div>

        <div id="text-to-type-container" class="relative">
            <div id="text-to-type" class="text-2xl tracking-wider p-4 bg-gray-50 rounded-lg font-mono leading-relaxed mb-1 select-none"></div>
            <input type="text" id="typing-input" class="absolute top-0 left-0 w-full h-full opacity-0 cursor-text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
        </div>
        
        <div class="flex items-center justify-between mt-4">
            <p id="save-status" class="text-green-600"></p>
            <div>
                <button id="reset-btn" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300"><i class="fas fa-sync-alt mr-2"></i>Làm lại</button>
                <button id="save-btn" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 ml-2" disabled><i class="fas fa-save mr-2"></i>Lưu kết quả</button>
            </div>
        </div>

        <div id="virtual-keyboard-container" class="mt-8">
            <div class="relative w-full max-w-3xl mx-auto mb-4">
                <svg id="hands-svg" viewBox="0 0 1000 300" class="w-full h-auto">
                    <g id="left-hand"><path id="finger-left-pinky" class="finger" d="M220,280 C200,200 200,120 220,80 S240,40 250,80 S270,200 250,280 Z" fill="#ccc"/><path id="finger-left-ring" class="finger" d="M280,280 C260,180 260,100 280,60 S300,20 310,60 S330,180 310,280 Z" fill="#ccc"/><path id="finger-left-middle" class="finger" d="M340,280 C320,160 320,80 340,40 S360,0 370,40 S390,160 370,280 Z" fill="#ccc"/><path id="finger-left-index" class="finger" d="M400,280 C380,180 380,100 400,60 S420,20 430,60 S450,180 430,280 Z" fill="#ccc"/><path id="finger-left-thumb" class="finger" d="M430,280 C460,260 490,240 500,200 S490,150 460,180 S430,220 430,280 Z" fill="#ccc"/></g>
                    <g id="right-hand"><path id="finger-right-pinky" class="finger" d="M780,280 C800,200 800,120 780,80 S760,40 750,80 S730,200 750,280 Z" fill="#ccc"/><path id="finger-right-ring" class="finger" d="M720,280 C740,180 740,100 720,60 S700,20 690,60 S670,180 690,280 Z" fill="#ccc"/><path id="finger-right-middle" class="finger" d="M660,280 C680,160 680,80 660,40 S640,0 630,40 S610,160 630,280 Z" fill="#ccc"/><path id="finger-right-index" class="finger" d="M600,280 C620,180 620,100 600,60 S580,20 570,60 S550,180 570,280 Z" fill="#ccc"/><path id="finger-right-thumb" class="finger" d="M570,280 C540,260 510,240 500,200 S510,150 540,180 S570,220 570,280 Z" fill="#ccc"/></g>
                </svg>
            </div>
            <div id="keyboard" class="space-y-1.5 p-3 bg-gray-200 rounded-lg">
                <div class="flex justify-center space-x-1.5"><div class="key" data-key="Backquote">`</div><div class="key" data-key="Digit1">1</div><div class="key" data-key="Digit2">2</div><div class="key" data-key="Digit3">3</div><div class="key" data-key="Digit4">4</div><div class="key" data-key="Digit5">5</div><div class="key" data-key="Digit6">6</div><div class="key" data-key="Digit7">7</div><div class="key" data-key="Digit8">8</div><div class="key" data-key="Digit9">9</div><div class="key" data-key="Digit0">0</div><div class="key" data-key="Minus">-</div><div class="key" data-key="Equal">=</div><div class="key flex-grow" data-key="Backspace">Backspace</div></div>
                <div class="flex justify-center space-x-1.5"><div class="key flex-grow-[1.5]" data-key="Tab">Tab</div><div class="key" data-key="KeyQ">Q</div><div class="key" data-key="KeyW">W</div><div class="key" data-key="KeyE">E</div><div class="key" data-key="KeyR">R</div><div class="key" data-key="KeyT">T</div><div class="key" data-key="KeyY">Y</div><div class="key" data-key="KeyU">U</div><div class="key" data-key="KeyI">I</div><div class="key" data-key="KeyO">O</div><div class="key" data-key="KeyP">P</div><div class="key" data-key="BracketLeft">[</div><div class="key" data-key="BracketRight">]</div><div class="key flex-grow-[1.5]" data-key="Backslash">\</div></div>
                <div class="flex justify-center space-x-1.5"><div class="key flex-grow-[1.8]" data-key="CapsLock">Caps Lock</div><div class="key" data-key="KeyA">A</div><div class="key" data-key="KeyS">S</div><div class="key" data-key="KeyD">D</div><div class="key" data-key="KeyF">F</div><div class="key" data-key="KeyG">G</div><div class="key" data-key="KeyH">H</div><div class="key" data-key="KeyJ">J</div><div class="key" data-key="KeyK">K</div><div class="key" data-key="KeyL">L</div><div class="key" data-key="Semicolon">;</div><div class="key" data-key="Quote">'</div><div class="key flex-grow-[1.8]" data-key="Enter">Enter</div></div>
                <div class="flex justify-center space-x-1.5"><div class="key flex-grow-[2.4]" data-key="ShiftLeft">Shift</div><div class="key" data-key="KeyZ">Z</div><div class="key" data-key="KeyX">X</div><div class="key" data-key="KeyC">C</div><div class="key" data-key="KeyV">V</div><div class="key" data-key="KeyB">B</div><div class="key" data-key="KeyN">N</div><div class="key" data-key="KeyM">M</div><div class="key" data-key="Comma">,</div><div class="key" data-key="Period">.</div><div class="key" data-key="Slash">/</div><div class="key flex-grow-[2.4]" data-key="ShiftRight">Shift</div></div>
                <div class="flex justify-center space-x-1.5"><div class="key" data-key="ControlLeft">Ctrl</div><div class="key" data-key="MetaLeft">Win</div><div class="key" data-key="AltLeft">Alt</div><div class="key flex-grow-[5]" data-key="Space"></div><div class="key" data-key="AltRight">Alt</div><div class="key" data-key="ContextMenu">Menu</div><div class="key" data-key="ControlRight">Ctrl</div></div>
            </div>
        </div>
    </main>

    <dialog id="name-modal" class="p-8 rounded-lg shadow-xl"><h2 class="text-2xl font-bold mb-4">Chào mừng bạn!</h2><p class="mb-6">Vui lòng nhập tên của bạn để bắt đầu và lưu kết quả.</p><form id="name-form"><input type="text" id="student-name-input" placeholder="Nhập tên của bạn..." class="w-full px-4 py-2 border rounded-md" required><button type="submit" class="w-full mt-4 px-4 py-2 bg-blue-600 text-white rounded-md">Bắt đầu</button></form></dialog>
    <script src="practice.js"></script>
</body>
</html>